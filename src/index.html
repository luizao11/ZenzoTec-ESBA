<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZenzoTec - Productos de Tecnología</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<!--<script>
// Verificar si el usuario está logueado
fetch('obtener_perfil.php')
  .then(res => {
    if (res.ok) {
      // Usuario logueado: cambiar "Iniciar Sesión" por "Mi Cuenta / Cerrar Sesión"
      const loginLink = document.querySelector('nav a[href="login.php"]');
      if (loginLink) {
        loginLink.href = 'checkout.html'; // o 'admin/index.php'
        loginLink.textContent = 'Mi Cuenta';
      }
      // Opcional: agregar enlace de cierre
      const nav = document.querySelector('nav ul');
      if (nav) {
        const li = document.createElement('li');
        li.innerHTML = '<a href="logout.php">Cerrar Sesión</a>';
        nav.appendChild(li);
      }
    }
  })
  .catch(() => {
    // No hay sesión: asegurar que diga "Iniciar Sesión"
    const loginLink = document.querySelector('nav a[href="login.php"]');
    if (loginLink) {
      loginLink.href = 'login.php';
      loginLink.textContent = 'Iniciar Sesión';
    }
  });
</script> -->
<script>
// Cargar productos dinámicamente
function cargarProductos() {
    const container = document.getElementById('products-container');
    if (!container) return;

    fetch('productos_api.php')
        .then(response => response.json())
        .then(productos => {
            if (!Array.isArray(productos)) {
                container.innerHTML = '<p class="loading-products">Error al cargar productos.</p>';
                return;
            }

            if (productos.length === 0) {
                container.innerHTML = '<p class="loading-products">No hay productos disponibles.</p>';
                return;
            }

            let html = '';
            productos.forEach(producto => {
                const imgSrc = producto.image 
                    ? `images/${producto.image}` 
                    : 'https://placehold.co/300x200/4F46E5/FFFFFF?text=Sin+Imagen';

                html += `
                    <div class="product-card">
                        <img src="${imgSrc}" 
                             alt="${producto.name}" 
                             onerror="this.src='https://placehold.co/300x200/4F46E5/FFFFFF?text=Sin+Imagen'">
                        <h3>${producto.name}</h3>
                        <p class="price">$${producto.price.toFixed(2)}</p>
                        <button class="btn-add-to-cart" 
                                data-id="${producto.id}" 
                                data-name="${producto.name}" 
                                data-price="${producto.price}">
                            Agregar al Carrito
                        </button>
                    </div>
                `;
            });
            container.innerHTML = html;

            // Re-vincular eventos de carrito
            document.querySelectorAll('.btn-add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = button.dataset.id;
                    const name = button.dataset.name;
                    const price = parseFloat(button.dataset.price);
                    
                    // Agregar al carrito (tu lógica existente)
                    addToCart({ id, name, price, quantity: 1 });
                });
            });
        })
        .catch(error => {
            container.innerHTML = '<p class="loading-products">Error de conexión.</p>';
        });
}

// Actualizar menú de autenticación
function updateAuthMenu() {
    const navUl = document.querySelector('header nav ul');
    if (!navUl) return;

    // Eliminar enlaces anteriores
    document.querySelectorAll('li[data-auth]').forEach(el => el.remove());

    fetch('obtener_perfil.php', { method: 'HEAD' })
        .then(response => {
            if (response.ok) {
                // Usuario logueado
                navUl.insertAdjacentHTML('beforeend', `
                    <li data-auth="true"><a href="checkout.html">Mi Cuenta</a></li>
                    <li data-auth="true"><a href="logout.php">Cerrar Sesión</a></li>
                `);
            } else {
                // Usuario no logueado
                navUl.insertAdjacentHTML('beforeend', `
                    <li data-auth="true"><a href="login.php">Iniciar Sesión</a></li>
                    <li data-auth="true"><a href="register.html">Registrarse</a></li>
                `);
            }
        })
        .catch(() => {
            // En caso de error, mostrar login/register
            navUl.insertAdjacentHTML('beforeend', `
                <li data-auth="true"><a href="login.php">Iniciar Sesión</a></li>
                <li data-auth="true"><a href="register.html">Registrarse</a></li>
            `);
        });
}

// Inicializar al cargar la página
document.addEventListener('DOMContentLoaded', function() {
    cargarProductos();
    updateAuthMenu();
    
    // Eventos del carrito (de tu script.js existente)
    document.querySelector('.cart-icon').addEventListener('click', () => {
        document.getElementById('cart-overlay').classList.add('active');
    });
    
    document.getElementById('close-cart').addEventListener('click', () => {
        document.getElementById('cart-overlay').classList.remove('active');
    });
    
    // Evento de checkout
    document.getElementById('checkout-btn').addEventListener('click', () => {
        fetch('obtener_perfil.php', { method: 'HEAD' })
            .then(response => {
                if (response.ok) {
                    window.location.href = 'checkout.html';
                } else {
                    window.location.href = 'login.php';
                }
            })
            .catch(() => {
                window.location.href = 'login.php';
            });
    });
});
</script>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1><i class="fas fa-microchip"></i> ZenzoTec</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#productos">Productos</a></li>
                    <li><a href="#ofertas">Ofertas</a></li>
                    <li><a href="#novedades">Novedades</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </nav>
            <div class="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="inicio" class="hero">
        <div class="container">
            <h2>Tecnología de Vanguardia al Mejor Precio</h2>
            <p>Descubre los últimos lanzamientos en electrónica y computación</p>
            <button class="btn-primary">Ver Productos</button>
        </div>
    </section>
  <!-- Carrusel de Novedades -->
    <section id="novedades" class="new-arrivals">
        <div class="container">
            <h2>Novedades</h2>
            <div class="carousel">
                <div class="carousel-container" id="carousel">
                    <div class="carousel-slide">
                        <img src="images/SmartWatch01.webp" alt="Smartwatch Series 8">
                        <div class="carousel-content">
                            <h3>Smartwatch Series 8</h3>
                            <p>El reloj inteligente más avanzado del mercado</p>
                            <p class="carousel-price">$399.99</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="https://placehold.co/600x300/06B6D4/FFFFFF?text=Tablet+Pro+12.9\"" alt="Tablet Pro 12.9\"">
                        <div class="carousel-content">
                            <h3>Tablet Pro 12.9"</h3>
                            <p>La potencia de una computadora en una tablet</p>
                            <p class="carousel-price">$1,099.99</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="https://placehold.co/600x300/EF4444/FFFFFF?text=Consola+Next-Gen" alt="Consola Next-Gen">
                        <div class="carousel-content">
                            <h3>Consola Next-Gen</h3>
                            <p>Experiencia de juego inmersiva en 4K</p>
                            <p class="carousel-price">$549.99</p>
                        </div>
                    </div>
                </div>
                <button class="carousel-btn prev" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-btn next" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </section>
    <!-- Productos Destacados -->
    <!-- se comenta para dar paso a seccion dinamica<section id="productos" class="featured-products">
        <div class="container">
            <h2>Productos Destacados</h2>
            <div class="products-grid">
                <div class="product-card">
                    <img src="https://placehold.co/300x200/4F46E5/FFFFFF?text=Laptop+Gaming" alt="Laptop Gaming">
                    <h3>Laptop Gaming RTX 4070</h3>
                    <p class="price">$1,899.99</p>
                    <button class="btn-add-to-cart" data-id="1" data-name="Laptop Gaming RTX 4070" data-price="1899.99">Agregar al Carrito</button>
                </div>
                <div class="product-card">
                    <img src="https://placehold.co/300x200/EC4899/FFFFFF?text=Smartphone+Pro" alt="Smartphone Pro">
                    <h3>Smartphone Pro 14"</h3>
                    <p class="price">$999.99</p>
                    <button class="btn-add-to-cart" data-id="2" data-name="Smartphone Pro 14\"" data-price="999.99">Agregar al Carrito</button>
                </div>
                <div class="product-card">
                    <img src="https://placehold.co/300x200/10B981/FFFFFF?text=Monitor+4K" alt="Monitor 4K">
                    <h3>Monitor 4K 32"</h3>
                    <p class="price">$499.99</p>
                    <button class="btn-add-to-cart" data-id="3" data-name="Monitor 4K 32\"" data-price="499.99">Agregar al Carrito</button>
                </div>
                <div class="product-card">
                    <img src="images/auricular_inalambrico_01.jpg" alt="Auriculares Pro">
                    <h3>Auriculares Pro Inalámbricos</h3>
                    <p class="price">$249.99</p>
                    <button class="btn-add-to-cart" data-id="4" data-name="Auriculares Pro Inalámbricos" data-price="249.99">Agregar al Carrito</button>
                </div>
                 <div class="product-card">
                    <img src="https://placehold.co/300x200/F59E0B/FFFFFF?text=Mouse+Pro" alt="Maouse Pro">
                    <h3>Mouse Pro Inalámbricos</h3>
                    <p class="price">$49.99</p>
                    <button class="btn-add-to-cart" data-id="4" data-name="Mouse Pro Inalámbricos" data-price="49.99">Agregar al Carrito</button>
                </div>
                 <div class="product-card">
                    <img src="https://placehold.co/300x200/F59E0B/FFFFFF?text=Pendrive+Pro" alt="Pendrive Pro">
                    <h3>Pendrive Pro </h3>
                    <p class="price">$179.99</p>
                    <button class="btn-add-to-cart" data-id="4" data-name="Pendrive Pro" data-price="179.99">Agregar al Carrito</button>
                </div>
                 <div class="product-card">
                    <img src="https://placehold.co/300x200/F59E0B/FFFFFF?text=Parlante+Pro" alt="Parlante Pro">
                    <h3>Parlante Pro Inalámbricos</h3>
                    <p class="price">$249.99</p>
                    <button class="btn-add-to-cart" data-id="4" data-name="Parlante Pro Inalámbricos" data-price="249.99">Agregar al Carrito</button>
                </div>
            </div>
        </div>
    </section> -->
    <!-- Productos Destacados -->
<section id="productos" class="featured-products">
    <div class="container">
        <h2>Productos Destacados</h2>
        <div class="products-grid" id="products-container">
            <p class="loading-products">Cargando productos...</p>
        </div>
    </div>
</section>

<style>
.loading-products {
    text-align: center;
    color: var(--gray);
    font-style: italic;
    grid-column: 1 / -1;
}
.product-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}
</style>
    <!-- Ofertas con Comentarios -->
    <section id="ofertas" class="deals">
        <div class="container">
            <h2>Ofertas Especiales</h2>
            <div class="deals-container">
                <div class="deal-product">
                    <img src="https://placehold.co/400x300/14B8A6/FFFFFF?text=Teclado+Mecánico" alt="Teclado Mecánico">
                    <div class="deal-info">
                        <h3>Teclado Mecánico RGB</h3>
                        <p class="original-price">$129.99</p>
                        <p class="deal-price">$89.99</p>
                        <div class="rating">
                            <span class="stars" data-product="5">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </span>
                            <span class="rating-value">4.5</span>
                        </div>
                        <button class="btn-add-to-cart" data-id="5" data-name="Teclado Mecánico RGB" data-price="89.99">Agregar al Carrito</button>
                    </div>
                </div>
                <div class="comments-section">
                    <h3>Comentarios y Calificaciones</h3>
                    <div class="comments-list" id="comments-list">
                        <div class="comment">
                            <div class="comment-header">
                                <span class="user">Carlos M.</span>
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                            </div>
                            <p>Excelente teclado, las teclas tienen un tacto perfecto y la retroiluminación es muy personalizable.</p>
                        </div>
                        <div class="comment">
                            <div class="comment-header">
                                <span class="user">Ana R.</span>
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <p>Muy buen precio para la calidad que ofrece. Lo recomiendo 100%.</p>
                        </div>
                    </div>
                    <form id="comment-form">
                        <h4>Deja tu comentario</h4>
                        <div class="rating-input">
                            <label>Calificación:</label>
                            <div class="stars-input">
                                <input type="radio" id="star5" name="rating" value="5"><label for="star5"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star4" name="rating" value="4"><label for="star4"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star3" name="rating" value="3"><label for="star3"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star2" name="rating" value="2"><label for="star2"><i class="fas fa-star"></i></label>
                                <input type="radio" id="star1" name="rating" value="1"><label for="star1"><i class="fas fa-star"></i></label>
                            </div>
                        </div>
                        <textarea id="comment-text" placeholder="Escribe tu comentario aquí..." required></textarea>
                        <button type="submit" class="btn-primary">Enviar Comentario</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

   <!-- Formulario de Pedidos 
    <section id="contacto" class="order-form">
        <div class="container">
            <h2>Realiza tu Pedido</h2>
            <form id="order-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Nombre Completo</label>
                        <input type="text" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Correo Electrónico</label>
                        <input type="email" id="email" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="phone">Teléfono</label>
                        <input type="tel" id="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Dirección</label>
                        <input type="text" id="address" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="product">Producto de Interés</label>
                    <select id="product" required>
                        <option value="">Selecciona un producto</option>
                        <option value="1">Laptop Gaming RTX 4070</option>
                        <option value="2">Smartphone Pro 14"</option>
                        <option value="3">Monitor 4K 32"</option>
                        <option value="4">Auriculares Pro Inalámbricos</option>
                        <option value="5">Teclado Mecánico RGB</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Mensaje Adicional</label>
                    <textarea id="message" rows="4"></textarea>
                </div>
                <button type="submit" class="btn-primary">Enviar Pedido</button>
            </form>
        </div>
    </section>
-->
    <!-- Carrito de Compras -->
    <div class="cart-overlay" id="cart-overlay">
        <div class="cart">
            <div class="cart-header">
                <h3>Carrito de Compras</h3>
                <button id="close-cart"><i class="fas fa-times"></i></button>
            </div>
            <div class="cart-items" id="cart-items">
                <!-- Los productos se agregarán aquí dinámicamente -->
                <p class="empty-cart">Tu carrito está vacío</p>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="cart-total">$0.00</span>
                </div>
                <button class="btn-primary" id="checkout-btn">Proceder al Pago</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>TechStore</h4>
                    <p>Tu tienda de confianza para productos de tecnología de última generación.</p>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p><i class="fas fa-map-marker-alt"></i> Av. Tecnología 123, Ciudad Digital</p>
                    <p><i class="fas fa-phone"></i> (555) 123-4567</p>
                    <p><i class="fas fa-envelope"></i> info@techstore.com</p>
                </div>
                <div class="footer-section">
                    <h4>Horario</h4>
                    <p>Lunes a Viernes: 9:00 - 20:00</p>
                    <p>Sábados: 10:00 - 18:00</p>
                    <p>Domingos: Cerrado</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 ZenzoTec. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="js/script.js"></script>
</body>
</html>
